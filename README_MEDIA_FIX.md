# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º –∑ —Ñ–æ—Ç–æ –Ω–∞ Render

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∏ —è–∫—ñ –±—É–ª–∏ –∑–Ω–∞–π–¥–µ–Ω—ñ:

### 1. **URL –Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–ª–∏—Å—è –≤ production**
- –£ `config/urls.py` –º–µ–¥—ñ–∞ URL –¥–æ–¥–∞–≤–∞–ª–∏—Å—è –ª–∏—à–µ –ø—Ä–∏ `DEBUG=True`
- –ù–∞ Render `DEBUG=False`, —Ç–æ–º—É –º–µ–¥—ñ–∞ —Ñ–∞–π–ª–∏ –Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–ª–∏—Å—è

### 2. **–•–∞—Ä–¥–∫–æ–¥–µ–Ω—ñ —à–ª—è—Ö–∏ –≤ —à–∞–±–ª–æ–Ω–∞—Ö**
- –£ `portfolio.html` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∏—Å—è —Ö–∞—Ä–¥–∫–æ–¥–µ–Ω—ñ —à–ª—è—Ö–∏ `/media/...`
- –¶–µ –Ω–µ –ø—Ä–∞—Ü—é–≤–∞–ª–æ –∫–æ–ª–∏ MEDIA_URL –∑–º—ñ–Ω—é–≤–∞–≤—Å—è

### 3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ production –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è**
- WhiteNoise –Ω–µ –±—É–≤ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è –º–µ–¥—ñ–∞ —Ñ–∞–π–ª—ñ–≤
- –ú–µ–¥—ñ–∞ —Ñ–∞–π–ª–∏ –Ω–µ –∫–æ–ø—ñ—é–≤–∞–ª–∏—Å—è –≤ staticfiles

### 4. **–í—ñ–¥—Å—É—Ç–Ω—ñ–π context processor**
- `{{ MEDIA_URL }}` –Ω–µ –±—É–≤ –¥–æ—Å—Ç—É–ø–Ω–∏–π –≤ —à–∞–±–ª–æ–Ω–∞—Ö

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ:

### 1. **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ URL –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é**
```python
# config/urls.py
# –ó–∞–≤–∂–¥–∏ –¥–æ–¥–∞—î–º–æ –º–µ–¥—ñ–∞ URL (–¥–ª—è –ª–æ–∫–∞–ª–∫–∏ —ñ –¥–ª—è production)
urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

### 2. **–î–æ–¥–∞–Ω–æ context processor**
```python
# config/settings.py
'context_processors': [
    # ...
    'django.template.context_processors.media',
],
```

### 3. **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —à–∞–±–ª–æ–Ω–∏**
```html
<!-- –ó–∞–º—ñ—Å—Ç—å —Ö–∞—Ä–¥–∫–æ–¥–µ–Ω–∏—Ö —à–ª—è—Ö—ñ–≤ -->
<img src="/media/{{ image }}">

<!-- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ Django –∑–º—ñ–Ω–Ω—É -->
<img src="{{ MEDIA_URL }}{{ image }}">
```

### 4. **–°—Ç–≤–æ—Ä–µ–Ω–æ –∫–æ–º–∞–Ω–¥—É –¥–ª—è production**
```bash
python manage.py setup_media_for_production --clean
```

### 5. **–û–Ω–æ–≤–ª–µ–Ω–æ build —Å–∫—Ä–∏–ø—Ç**
- –î–æ–¥–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–µ–¥—ñ–∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç—ñ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ñ settings –¥–ª—è production

## üöÄ –Ø–∫ –∑–∞–¥–µ–ø–ª–æ—ó—Ç–∏ –∑–º—ñ–Ω–∏:

### 1. **–õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
```bash
# –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ venv
source venv/bin/activate

# –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –º–µ–¥—ñ–∞ –¥–ª—è production
python manage.py setup_media_for_production --clean

# –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ –∑ production settings
python manage.py runserver --settings=config.settings_production
```

### 2. **–î–µ–ø–ª–æ–π –Ω–∞ Render:**
```bash
git add .
git commit -m "Fix: –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –º–µ–¥—ñ–∞ —Ñ–∞–π–ª–∞–º–∏ –Ω–∞ Render"
git push origin main
```

### 3. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é:**
- –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä—ñ–≤ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –≤ –∫–∞—Ç–∞–ª–æ–∑—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —Ñ–æ—Ç–æ –ø—Ä–æ–µ–∫—Ç—ñ–≤ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –≤ –ø–æ—Ä—Ç—Ñ–æ–ª—ñ–æ
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ç–æ–≤–∞—Ä—ñ–≤

## üìã –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:

### –Ø–∫ –ø—Ä–∞—Ü—é—î —Ä—ñ—à–µ–Ω–Ω—è:
1. **Development**: –º–µ–¥—ñ–∞ —Ñ–∞–π–ª–∏ –æ–±—Å–ª—É–≥–æ–≤—É—é—Ç—å—Å—è Django —á–µ—Ä–µ–∑ MEDIA_URL
2. **Production**: –º–µ–¥—ñ–∞ —Ñ–∞–π–ª–∏ –∫–æ–ø—ñ—é—é—Ç—å—Å—è –¥–æ `staticfiles/media/` —ñ –æ–±—Å–ª—É–≥–æ–≤—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ WhiteNoise
3. **URL**: –≤ –æ–±–æ—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `/media/` URL
4. **–®–∞–±–ª–æ–Ω–∏**: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `{{ MEDIA_URL }}` –¥–ª—è –¥–∏–Ω–∞–º—ñ—á–Ω–∏—Ö —à–ª—è—Ö—ñ–≤

### –§–∞–π–ª–∏ —â–æ –±—É–ª–∏ –∑–º—ñ–Ω–µ–Ω—ñ:
- `config/urls.py` - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—é –º–µ–¥—ñ–∞
- `config/settings.py` - –¥–æ–¥–∞–Ω–æ context processor
- `config/settings_production.py` - –æ–Ω–æ–≤–ª–µ–Ω–æ production –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- `mainapp/templates/mainapp/portfolio.html` - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —à–ª—è—Ö–∏ –¥–æ –∑–æ–±—Ä–∞–∂–µ–Ω—å
- `build.sh` - –¥–æ–¥–∞–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–µ–¥—ñ–∞
- `mainapp/management/commands/setup_media_for_production.py` - –Ω–æ–≤–∞ –∫–æ–º–∞–Ω–¥–∞

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º:

### –Ø–∫—â–æ —Ñ–æ—Ç–æ –≤—Å–µ —â–µ –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è:

1. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ Render:**
   - –®—É–∫–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏ 404 –¥–ª—è `/media/` URL
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—è –∫–æ–º–∞–Ω–¥–∞ `setup_media_for_production`

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ–∞–π–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:**
   - –í—ñ–¥–∫—Ä–∏—Ç–∏ Developer Tools ‚Üí Network
   - –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É —ñ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è —è–∫—ñ –∑–∞–ø–∏—Ç–∏ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å

3. **–õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
   ```bash
   python manage.py collectstatic --settings=config.settings_production
   python manage.py runserver --settings=config.settings_production
   ```

### –õ–æ–≥–∏ —è–∫—ñ –º–∞—é—Ç—å –±—É—Ç–∏ –≤ build –ø—Ä–æ—Ü–µ—Å—ñ:
```
üìÅ Setting up media files for production...
‚úÖ üñºÔ∏è products/product_287_0_...
‚úÖ üñºÔ∏è portfolio/1494.jpg
üìÅ –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ 195 –º–µ–¥—ñ–∞ —Ñ–∞–π–ª—ñ–≤ –¥–æ staticfiles/media/
üéâ –ú–µ–¥—ñ–∞ —Ñ–∞–π–ª–∏ –≥–æ—Ç–æ–≤—ñ –¥–ª—è production!
``` 